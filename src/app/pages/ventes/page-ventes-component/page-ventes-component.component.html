<div class="col txt">

    <div class="row m-3">
        <div class="col-md-8 p-0 my-text">
            <h1 class="nc">Liste des Ventes</h1>
        </div>

        <div class="col-md-3 text-right"> 
            <app-boutton-action routerLink="/nouvel-vente"></app-boutton-action></div>

    </div>
   
    <div style=" max-height: 700px ;overflow-x: hidden; overflow-y: scroll;"> 
    
    
        <div class="accordion " id="accordionExample">
            <div class="card my-card" *ngFor="let vente of listVente; let i = index">
                <div class="card-body" id="heading{{i}}">
                    <button class="btn btn-block text-left" type="button" [attr.data-target]="'#collapse' + i"
                        (click)="getlignebyid(vente.id) " [attr.aria-expanded]="isAccordionOpen(i) ? 'true' : 'false'"
                        (click)="toggleAccordion(i)">

                        <div class="row mb-1 mr-0 custom-border">

                            <!--  Details vent-->
                            <div class="col-md-6 custom-border-right mb-1 mt-1 ">
                                <div class="col">
                                    <div class="row my-text">
                                        <div class="col-md-1"><i class="fas fa-info-circle blue-color my-icon"></i></div>
                                        <div class="col-md-10">{{ vente?.code }}</div>
                                    </div>
                                    <div class="row my-text">
                                        <div class="col-md-1"><i class="fas fa-info-circle blue-color my-icon"></i></div>
                                        <div class="col-md-10">{{ vente?.dateVente }}</div>
                                    </div>
                                    <div class="row my-text">
                                        <div class="col-md-1"><i class="fas fa-phone-alt blue-color my-icon"></i></div>
                                        <div class="col-md-10">{{ vente?.commentaire }}</div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6 mb-1 mt-1 ">
                                <div class="col">
                                    <div class="row mt-3 my-text">
                                            <i class="fas fa-money-check fa-2x blue-color my-icon ml-2 mr-2 mt-1"></i>
                                             <div id="second"><h3>Total Ventes:{{vente.total}} DA</h3></div>                                                                  
                                    </div>
                                </div>
                            </div>
                        </div>

                    </button>
                </div>
                 <!--  details lign vente-->
                <div [id]="'collapse' + i" [ngClass]="{'collapse': !isAccordionOpen(i), 'show': isAccordionOpen(i)}"
                    [attr.aria-labelledby]="'heading' + i">
                    <div class="custom-border" style=" max-height: 500px ;overflow-x: hidden; overflow-y: scroll;">
                    <div class="card-body my-text m-2" *ngFor="let ligneV of listligneV">                   
                   
                        <div class="row mb-1 mr-0 custom-border">
                            
                      
                            <div class="col-md-3 custom-border-right mb-1 mt-1 ">
                                <div class="row text-center">
                                    <div class="col-md-11">{{ ligneV.article?.codeArticle }}</div>
                                </div>
                            </div>

                            <div class="col-md-3 custom-border-right mb-1 mt-1 ">
                                <div class="row">
                                    <div class="col-md-12 text-center">
                                        {{ ligneV.article?.designation }}
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-2 custom-border-right mb-1 mt-1 ">
                                <div class="row">
                                    <div class="col-md-12 text-center">
                                        {{ ligneV.quantite }}
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-2 custom-border-right mb-1 mt-1 ">
                                <div class="row">
                                    <div class="col-md-12 text-center">
                                        {{ ligneV.prixUnitaire }}
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-2 mb-1 mt-1">
                                <div class="row">
                                    <div class="col-md-12 text-center">
                                        {{ ligneV.prixUnitaire && ligneV.quantite ?
                                        +ligneV.prixUnitaire * +ligneV.quantite : '' }}
                                    </div>
                                </div>
                            </div>
                        </div></div>



                        <!-- <app-detail-cmd *ngFor="let ligne of mapLignesVente.get(vente.id)"></app-detail-cmd> -->
                    </div>
                </div>

                <div class="card-footer">
                    <div class="row my-text">
                        <div class="col-md-11 text-right ">
                        <div class="row">
                        <h5 class="col-md-11"> Total commande:{{ vente.total }} DA</h5>
                        <i class="fas fa-money-check-alt blue-color fa-2x my-icon"></i></div> 
                        </div>
                    </div>
                </div>
            </div>
        </div>
    
    </div>
   
    <div class="row mb-3 mt-3">
        <div class=" col-md-12 text-center ">
          <app-pagination></app-pagination>
        </div>
      </div>

</div>